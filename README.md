# B站直播弹幕获取工具


一个用于获取B站直播间弹幕和礼物信息和进房相关的数据的工具，提供了 Go、Rust、Python 三种语言的实现版本。三个版本使用相同的业务逻辑，可根据需要选择使用。

## 功能特性

- 实时获取B站直播间弹幕消息
- 接收并解析礼物赠送信息
- 自动重连机制，保持稳定连接
- 支持WBI签名认证
- 心跳保活机制
- 支持Brotli、Deflate消息压缩

## 快速开始

### Python 版本

**运行：**
```bash
python main.py
```

### Go 版本

**运行：**
```bash
go run main.go
```

### Rust 版本

**运行：**
```bash
cargo run
```

## 使用方法

所有版本的使用方法相同，只需修改代码中的房间ID即可：



## 项目结构

```
├── main.go    # Go语言实现
├── main.py    # Python语言实现
├── main.rs    # Rust语言实现
└── README.md  # 本文档
```

## 技术实现

### 核心流程

1. **初始化阶段**
   - 获取真实房间ID
   - 获取用户UID（可选）
   - 获取BUVID（浏览器标识）
   - 获取弹幕服务器配置

2. **连接阶段**
   - 建立WebSocket连接
   - 发送认证包
   - 启动心跳定时器

3. **消息处理**
   - 解析消息头部
   - 根据压缩类型解压消息
   - 解析业务消息并回调处理

### WBI签名机制

所有版本都实现了B站的WBI签名机制，用于API请求认证：
- 定期刷新WBI密钥（每11小时59分30秒）
- 使用特定的索引表对密钥进行重排
- 对请求参数进行MD5签名

## 注意事项

- 请遵守B站相关服务条款
- 不要频繁重连，避免对服务器造成压力
- 建议添加适当的错误处理和日志记录
- 生产环境使用时建议添加限流机制

## 贡献

欢迎提交Issue和Pull Request！如果你有其他语言的实现版本，也欢迎贡献到本项目中。

## 许可证

MIT License

